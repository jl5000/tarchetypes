<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Alternative to tar_target() for an R Markdown document. — tar_render • tarchetypes</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Alternative to tar_target() for an R Markdown document. — tar_render" />
<meta property="og:description" content="Shorthand to include an R Markdown document in a
targets pipeline." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tarchetypes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="https://wlandau.github.io/targets">Targets</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/wlandau/tarchetypes">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Alternative to <code>tar_target()</code> for an R Markdown document.</h1>
    <small class="dont-index">Source: <a href='https://github.com/wlandau/tarchetypes/blob/master/R/tar_render.R'><code>R/tar_render.R</code></a></small>
    <div class="hidden name"><code>tar_render.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Shorthand to include an R Markdown document in a
<code>targets</code> pipeline.</p>
    </div>

    <pre class="usage"><span class='fu'>tar_render</span><span class='op'>(</span>
  <span class='va'>name</span>,
  <span class='va'>path</span>,
  tidy_eval <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"tidy_eval"</span><span class='op'>)</span>,
  packages <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"packages"</span><span class='op'>)</span>,
  library <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"library"</span><span class='op'>)</span>,
  error <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"error"</span><span class='op'>)</span>,
  deployment <span class='op'>=</span> <span class='st'>"main"</span>,
  priority <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"priority"</span><span class='op'>)</span>,
  resources <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"resources"</span><span class='op'>)</span>,
  retrieval <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"retrieval"</span><span class='op'>)</span>,
  cue <span class='op'>=</span> <span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_option_get.html'>tar_option_get</a></span><span class='op'>(</span><span class='st'>"cue"</span><span class='op'>)</span>,
  quiet <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p>Symbol, name of the target.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>Character string, file path to the R Markdown source file.
Must have length 1.</p></td>
    </tr>
    <tr>
      <th>tidy_eval</th>
      <td><p>Logical, whether to enable tidy evaluation
when interpreting <code>command</code> and <code>pattern</code>. If <code>TRUE</code>, you can use the
"bang-bang" operator <code>!!</code> to programmatically insert
the values of global objects.</p></td>
    </tr>
    <tr>
      <th>packages</th>
      <td><p>Character vector of packages to load right before
the target builds. Use <code><a href='https://wlandau.github.io/targets/reference/tar_option_set.html'>tar_option_set()</a></code> to set packages
globally for all subsequent targets you define.</p></td>
    </tr>
    <tr>
      <th>library</th>
      <td><p>Character vector of library paths to try
when loading <code>packages</code>.</p></td>
    </tr>
    <tr>
      <th>error</th>
      <td><p>Character of length 1, what to do if the target
runs into an error. If <code>"stop"</code>, the whole pipeline stops
and throws an error. If <code>"continue"</code>, the error is recorded,
but the pipeline keeps going.</p></td>
    </tr>
    <tr>
      <th>deployment</th>
      <td><p>Character of length 1, only relevant to
<code><a href='https://wlandau.github.io/targets/reference/tar_make_clustermq.html'>tar_make_clustermq()</a></code> and <code><a href='https://wlandau.github.io/targets/reference/tar_make_future.html'>tar_make_future()</a></code>. If <code>"worker"</code>,
the target builds on a parallel worker. If <code>"main"</code>,
the target builds on the host machine / process managing the pipeline.</p></td>
    </tr>
    <tr>
      <th>priority</th>
      <td><p>Numeric of length 1 between 0 and 1. Controls which
targets get deployed first when multiple competing targets are ready
simultaneously. Targets with priorities closer to 1 get built earlier.
Only applies to <code><a href='https://wlandau.github.io/targets/reference/tar_make_future.html'>tar_make_future()</a></code> and <code><a href='https://wlandau.github.io/targets/reference/tar_make_clustermq.html'>tar_make_clustermq()</a></code>
(not <code><a href='https://wlandau.github.io/targets/reference/tar_make.html'>tar_make()</a></code>). <code><a href='https://wlandau.github.io/targets/reference/tar_make_future.html'>tar_make_future()</a></code> with no extra settings is
a drop-in replacement for <code><a href='https://wlandau.github.io/targets/reference/tar_make.html'>tar_make()</a></code> in this case.</p></td>
    </tr>
    <tr>
      <th>resources</th>
      <td><p>A named list of computing resources. Uses:</p><ul>
<li><p>Template file wildcards for <code>future::future()</code> in <code><a href='https://wlandau.github.io/targets/reference/tar_make_future.html'>tar_make_future()</a></code>.</p></li>
<li><p>Template file wildcards <code>clustermq::workers()</code> in <code><a href='https://wlandau.github.io/targets/reference/tar_make_clustermq.html'>tar_make_clustermq()</a></code>.</p></li>
<li><p>Custom <code>curl</code> handle if <code>format = "url"</code>,
e.g. <code>resources = list(handle = curl::new_handle())</code>.</p></li>
<li><p>Custom preset for <code>qs::qsave()</code> if <code>format = "qs"</code>, e.g.
<code>resources = list(handle = "archive")</code>.</p></li>
<li><p>Custom compression level for <code>fst::write_fst()</code> if
<code>format</code> is <code>"fst"</code>, <code>"fst_dt"</code>, or <code>"fst_tbl"</code>, e.g.
<code>resources = list(compress = 100)</code>.</p></li>
<li><p>AWS bucket and prefix for the <code>"aws_"</code> formats, e.g.
<code>resources = list(bucket = "your-bucket", prefix = "folder/name")</code>.
<code>bucket</code> is required for AWS formats. See the cloud computing chapter
of the manual for details.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>retrieval</th>
      <td><p>Character of length 1, only relevant to
<code><a href='https://wlandau.github.io/targets/reference/tar_make_clustermq.html'>tar_make_clustermq()</a></code> and <code><a href='https://wlandau.github.io/targets/reference/tar_make_future.html'>tar_make_future()</a></code>.
If <code>"main"</code>, the target's dependencies are loaded on the host machine
and sent to the worker before the target builds.
If <code>"worker"</code>, the worker loads the targets dependencies.</p></td>
    </tr>
    <tr>
      <th>cue</th>
      <td><p>An optional object from <code><a href='https://wlandau.github.io/targets/reference/tar_cue.html'>tar_cue()</a></code> to customize the
rules that decide whether the target is up to date.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>An option to suppress printing of the pandoc command line.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Named arguments to <code><a href='https://rdrr.io/pkg/rmarkdown/man/render.html'>rmarkdown::render()</a></code>.
These arguments are evaluated when the target actually runs in
<code><a href='https://wlandau.github.io/targets/reference/tar_make.html'>tar_make()</a></code>, not when the target is defined. That means, for
example, you can use upstream targets as parameters of
parameterized R Markdown reports.
<code>tar_render(your_target, "your_report.Rmd", params = list(your_param = your_target))</code> # nolint
will run <code><a href='https://rdrr.io/pkg/rmarkdown/man/render.html'>rmarkdown::render("your_report.Rmd", params = list(your_param = your_target))</a></code>. # nolint
For parameterized reports, it is recommended to supply a distinct
<code>output_file</code> argument to each <code>tar_render()</code> call
and set useful defaults for parameters in the R Markdown source.
See the examples section for a demonstration.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://wlandau.github.io/targets/reference/tar_target.html'>tar_target()</a></code> object with <code>format = "file"</code>.
When this target runs, it returns a character vector
of file paths. The first file paths are the output files
(returned by <code><a href='https://rdrr.io/pkg/rmarkdown/man/render.html'>rmarkdown::render()</a></code>) and the R Markdown
source file is last. But unlike <code><a href='https://rdrr.io/pkg/rmarkdown/man/render.html'>rmarkdown::render()</a></code>,
all returned paths are <em>relative</em> paths to ensure portability
(so that the project can be moved from one file system to another
without invalidating the target).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>tar_render()</code> is an alternative to <code><a href='https://wlandau.github.io/targets/reference/tar_target.html'>tar_target()</a></code> for
R Markdown reports that depend on other targets. The R Markdown source
should mention dependency targets with <code><a href='https://wlandau.github.io/targets/reference/tar_load.html'>tar_load()</a></code> and <code><a href='https://wlandau.github.io/targets/reference/tar_read.html'>tar_read()</a></code>
in the active code chunks (which also allows you to render the report
outside the pipeline if the <code>_targets/</code> data store already exists).
(Do not use <code><a href='https://wlandau.github.io/targets/reference/tar_load_raw.html'>tar_load_raw()</a></code> or <code><a href='https://wlandau.github.io/targets/reference/tar_read_raw.html'>tar_read_raw()</a></code> for this.)
Then, <code>tar_render()</code> defines a special kind of target. It
1. Finds all the <code><a href='https://wlandau.github.io/targets/reference/tar_load.html'>tar_load()</a></code>/<code><a href='https://wlandau.github.io/targets/reference/tar_read.html'>tar_read()</a></code> dependencies in the report
and inserts them into the target's command.
This enforces the proper dependency relationships.
(Do not use <code><a href='https://wlandau.github.io/targets/reference/tar_load_raw.html'>tar_load_raw()</a></code> or <code><a href='https://wlandau.github.io/targets/reference/tar_read_raw.html'>tar_read_raw()</a></code> for this.)
2. Sets <code>format = "file"</code> (see <code><a href='https://wlandau.github.io/targets/reference/tar_target.html'>tar_target()</a></code>) so <code>targets</code>
watches the files at the returned paths and reruns the report
if those files change.
3. Configures the target's command to return both the output
report files and the input source file. All these file paths
are relative paths so the project stays portable.
4. Forces the report to run in the user's current working directory
instead of the working directory of the report.
5. Sets convenient default options such as <code>deployment = "main"</code>
in the target and <code>quiet = TRUE</code> in <code><a href='https://rdrr.io/pkg/rmarkdown/man/render.html'>rmarkdown::render()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_dir.html'>tar_dir</a></span><span class='op'>(</span><span class='op'>{</span>
<span class='co'># Unparameterized R Markdown:</span>
<span class='va'>lines</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='st'>"---"</span>,
  <span class='st'>"title: report"</span>,
  <span class='st'>"output_format: html_document"</span>,
  <span class='st'>"---"</span>,
  <span class='st'>""</span>,
  <span class='st'>"```{r}"</span>,
  <span class='st'>"targets::tar_read(data)"</span>,
  <span class='st'>"```"</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/writeLines.html'>writeLines</a></span><span class='op'>(</span><span class='va'>lines</span>, <span class='st'>"report.Rmd"</span><span class='op'>)</span>
<span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_script.html'>tar_script</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wlandau.github.io/tarchetypes/'>tarchetypes</a></span><span class='op'>)</span>
  <span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_pipeline.html'>tar_pipeline</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span><span class='op'>(</span><span class='fl'>26</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>letters</span><span class='op'>)</span><span class='op'>)</span>,
    <span class='fu'>tar_render</span><span class='op'>(</span><span class='va'>report</span>, <span class='st'>"report.Rmd"</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
<span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_make.html'>tar_make</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='co'># browseURL("report.html") # View the report.</span>
<span class='co'># Parameterized R Markdown:</span>
<span class='va'>lines</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='st'>"---"</span>,
  <span class='st'>"title: report"</span>,
  <span class='st'>"output_format: html_document"</span>,
  <span class='st'>"params:"</span>,
  <span class='st'>"  your_param: \"default value\""</span>,
  <span class='st'>"---"</span>,
  <span class='st'>""</span>,
  <span class='st'>"```{r}"</span>,
  <span class='st'>"print(params$your_param)"</span>,
  <span class='st'>"```"</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/writeLines.html'>writeLines</a></span><span class='op'>(</span><span class='va'>lines</span>, <span class='st'>"report.Rmd"</span><span class='op'>)</span>
<span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_script.html'>tar_script</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://wlandau.github.io/tarchetypes/'>tarchetypes</a></span><span class='op'>)</span>
  <span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_pipeline.html'>tar_pipeline</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_target.html'>tar_target</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span><span class='op'>(</span><span class='fl'>26</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>letters</span><span class='op'>)</span><span class='op'>)</span>,
    <span class='fu'>tar_render</span><span class='op'>(</span><span class='va'>report</span>, <span class='st'>"report.Rmd"</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>your_param <span class='op'>=</span> <span class='va'>data</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>
<span class='co'># targets::tar_visnetwork() # The report should be connected to the data.</span>
<span class='fu'>targets</span><span class='fu'>::</span><span class='fu'><a href='https://wlandau.github.io/targets/reference/tar_make.html'>tar_make</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='co'># browseURL("report.html") # View the report.</span>
<span class='op'>}</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


